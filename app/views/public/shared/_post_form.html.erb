<!--投稿フォーム-->
<%= form_with model: post, local: true, multipart: true do |f| %>
  <div class="form-group">
    <%= f.label :タイトル %>
    <%= f.text_field :title, class: 'form-control post_title' %>
  </div>
  <div class="tag_form">
    <label>タグ(,で区切ると複数タグ登録できます)</label>
    <%= f.text_field :tag_name,value: @tag_list, class: 'form-control' %>
  </div>
  <div class="form-group">
    <%= f.label :本文 %>
    <%= f.text_area :body, class: 'form-control post_body', rows:"5" %>
  </div>

  <div>
    <%= f.label :画像 %>
    <%= f.file_field :images, multiple: true, accept: "image/*" %>
    <% if post.images.attached? %>
    <p>削除する画像にチェックをつけてください</p>
    <div class="d-flex post_edit_form">
    <% @post.images.each do |image| %>
      <div>
        <%= f.check_box :image_ids, { multiple: true }, image.id, false %>
        <label for="post_image_ids_<%= image.id %>" > 
          <%= image_tag image, size: '180x120' %>
        </label>
      </div>
    <% end %>
    </div>
  <% end %>
  </div>

  <div class="form-group mt-3">
    <% if post.new_record? %>
        <%= f.submit '新規作成', class: "btn btn-success mt-4" %>
      <% else %>
        <%= f.submit '更新する', class: "btn btn-success mt-4" %>
      <% end %>
  </div>
<% end %>